<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools">
  <uses-permission
    android:name="android.permission.PACKAGE_USAGE_STATS"
    tools:ignore="ProtectedPermissions" />
  <uses-permission
    android:name="android.permission.QUERY_ALL_PACKAGES"
    tools:ignore="QueryAllPackagesPermission" />

  <application>
    <!-- Accessibility Service for app blocking -->
    <service
      android:name=".AppBlockingService"
      android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE"
      android:exported="true">
      <intent-filter>
        <action android:name="android.accessibilityservice.AccessibilityService" />
      </intent-filter>
      <meta-data
        android:name="android.accessibilityservice"
        android:resource="@xml/accessibility_service_config" />
    </service>

    <!-- Blocking overlay activity -->
    <activity
      android:name=".BlockingActivity"
      android:exported="false"
      android:theme="@style/Theme.AppCompat.Light.NoActionBar"
      android:launchMode="singleTask"
      android:excludeFromRecents="true" />
  </application>
</manifest>
